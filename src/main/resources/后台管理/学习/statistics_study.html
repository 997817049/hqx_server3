<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <title>概况</title>
    <link rel="stylesheet" type="text/css" href="../public/layui/css/layui.css">
    <link href="../public/css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../public/css/nav.css">
    <link rel="stylesheet" type="text/css" href="../public/css/iconfont.css">
    <script src="../public/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../public/js/nav.js"></script>
    <script src="../public/layui/layui.js"></script>
    <script src="../public/js/alert.js"></script>
    <script src="../public/js/public.js"></script>
    <script src="../public/js/echarts.min.js"></script>
</head>
<style>
    .grid-demo, .grid-demo3 {
        padding: 10px;
        height: 63px;
        line-height: 43px;
        text-align: center;
        background-color: #fff;
        color: #333;
        text-align: left;
        font-size: 16px;
        -ms-box-shadow: 0 1px 3px 0px rgba(0, 0, 0, 0.2);
        -o-box-shadow: 0 1px 3px 0px rgba(0, 0, 0, 0.2);
        -moz-box-shadow: 0 1px 3px 0px rgba(0, 0, 0, 0.2);
        -webkit-box-shadow: 0 1px 3px 0px rgba(0, 0, 0, 0.2);
        box-shadow: 0 1px 3px 0px rgba(0, 0, 0, 0.2);
    }

    .grid-demo3 {
        height: 380px;
    }
    .top-chart-warpper{
        height: 48%; width: 100%;
    }
    .bottom-chart-warpper{
        height: 48%; width: 100%; margin-top: 2%;
    }
    .chart-title{
        height: 30px; width: 100%; line-height: 30px; font-weight: bold
    }
    .chart-content {
        width: 100%;
        margin-top: 5px;
    }
    .chart-label-txt{
        display: inline-block; width: 48%; height: 20px; line-height: 20px;font-size: 14px;margin-top: 2px;overflow: hidden;
    }
</style>
<body>
<!-- 头部导航 -->
<div class="jzy_w_max jzy_h_50 br_12">
    <!-- LOGO -->
    <div class="jzy_w_50 jzy_h_50 br_12 br_11_hove lt logo">
        <a href=""><img src="../public/images/aliyun.png"></a>
    </div>
    <!--菜单1-->
    <div class="jzy_w_90 jzy_h_50 br_12 br_11_hove lt top-txt">
        <a class="cr_h_0 fs_14" href="">管理控制台</a>
    </div>

    <!--头像-->
    <div class="jzy_w_50 jzy_h_50 br_12 br_11_hove rt top-txt logo">
        <img class="jzy_boy_18" src="../public/images/touxiang.jpg" style="width: 36px; height: 36px">
        <!-- 头像下拉菜单 -->
        <div class="jzy_w_270 jzy_h_408 br_h_0 top_nav">
            <!--头像跟用户名-->
            <div class="jzy_w_max jzy_h_50 lt" style="margin-top: 15px">
                <img class="jzy_boy_18" src="../public/images/touxiang.jpg" style="width: 36px; height: 36px">
            </div>
            <div class="jzy_w_max jzy_h_30 lt" style="line-height: 30px; border-bottom: 1px solid #e2e2e2">
                1731223728@qq.com
            </div>
            <!--用户公共操作权限-->
            <div class="jzy_w_250 jzy_h_250 lt" style="padding: 10px">
                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/jbzl.png"></p>基本资料</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/smrz.png"></p>实名认证</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/aqsz.png"></p>安全设置</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/fxgk.png"></p>风险管控</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/fwkz.png"></p>访问控制</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/api.png"></p>API接口</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/hyqy.png"></p>会员权益</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/hyjf.png"></p>会员积分</a>
                </div>

                <div class="jzy_w_80 jzy_h_80 lt br_h_2_hove">
                    <a><p class="jzy_h_30"><img src="../public/images/icon/wjgl.png"></p>文件管理</a>
                </div>
            </div>
            <!--退出登录-->
            <div class="jzy_w_max jzy_h_42 lt br_h_9" style="background: #f5f5f6; line-height: 45px"><a
                    href="../login.html">退出管理控制台</a></div>
        </div>
    </div>

    <!--菜单2-->
    <div class="jzy_w_90 jzy_h_50 br_12 br_11_hove rt top-txt">
        <a class="cr_h_0 fs_14">语言选择</a>
        <!-- 头像下拉菜单 -->
        <div class="jzy_w_90 br_h_0 top_nav nav2">
            <p class="p"><a href="">简体中文</a></p>
            <p class="p"><a href="">English</a></p>
        </div>
    </div>

    <!--菜单3-->
    <div class="jzy_w_90 jzy_h_50 br_12 br_11_hove rt top-txt">
        <a class="cr_h_0 fs_14">权限设置</a>
        <!-- 头像下拉菜单 -->
        <div class="jzy_w_90 br_h_0 top_nav nav2">
            <p class="p"><a href="">新建权限</a></p>
            <p class="p"><a href="">角色列表</a></p>
            <p class="p"><a href="">部门管理</a></p>
        </div>
    </div>
</div>

<!--左侧主导航-->
<div class="jzy_w_180 lt main_height main_left nav" style="background: #333744">
    <div class="nav-top">
        <div id="mini" style="background: #4a5064; text-align: center">
            <img src="../public/images/icon/suofang.png" width="20">
        </div>
    </div>
    <ul>
        <li class="nav-item">
            <a href="javascript:"><i class="my-icon nav-icon icon_1"></i><span>新闻模块</span><i
                    class="my-icon nav-more"></i></a>
            <ul>
                <li><a href="../新闻/adm_news.html"><span>新闻</span></a></li>
                <li><a href="../新闻/adm_character.html"><span>人物</span></a></li>
                <li><a href="../新闻/adm_military.html"><span>军事</span></a></li>
                <li><a href="../新闻/adm_history.html"><span>史实</span></a></li>
            </ul>
        </li>
        <li class="nav-item">
            <a href="javascript:"><i class="my-icon nav-icon icon_1"></i><span>基地模块</span><i
                    class="my-icon nav-more"></i></a>
            <ul>
                <!--<li><a href="../基地/add_base.html"><span>新增景点</span></a></li>-->
                <li><a href="../基地/adm_base.html"><span>基地</span></a></li>
            </ul>
        </li>
        <li class="nav-item">
            <a href="javascript:"><i class="my-icon nav-icon icon_1"></i><span>学习模块</span><i
                    class="my-icon nav-more"></i></a>
            <ul>
                <li><a href="adm_exam.html"><span>答题</span></a></li>
                <li><a href="adm_book.html"><span>书籍</span></a></li>
                <li><a href="adm_teleplay.html"><span>电视</span></a></li>
                <li><a href="adm_film.html"><span>电影</span></a></li>
                <li><a href="adm_variety.html"><span>综艺</span></a></li>
                <li><a href="adm_documentary.html"><span>纪录片</span></a></li>
                <li><a href="adm_drama.html"><span>歌舞剧</span></a></li>
            </ul>
        </li>
    </ul>
</div>

<!--左侧次导航-->
<div class="jzy_w_180 lt main_height main_nav" style="background: #D9DEE4">
    <div class="jzy_w_150 jzy_h_70 fs_13 lt" style="font-weight: bold; line-height: 70px;padding-left: 30px">学习管理</div>
    <div class="jzy_w_180 fs_13 lt main_height2" style="background: #EAEDF1;">
        <div class="jzy_w_130 jzy_h_40 fs_12 br_h_0 lt br_h_0" style="line-height: 40px;padding-left: 50px">
            <a href="">概况</a>
        </div>
    </div>
</div>

<!--主内容框架-->
<div class="main_height main_index lt" style="background: #f2f4f8;overflow-y: hidden;">
    <div class="layui-tab layui-tab-card" style="width: 100%; height:100%; margin-bottom: 0">
        <ul class="layui-tab-title">
            <li class="layui-this" onclick="showWeek()">七天内</li>
            <li onclick="showMonth()">本月</li>
            <li onclick="showYear()">本年</li>
        </ul>
        <div id="week-content" class="layui-row layui-col-space10" style="padding: 10px;">
            <!--统计图-->
            <div class="layui-col-md8">
                <div class="grid-demo3" style="height: 485px">
                    <div style="width: 100%; height: 485px;" id="chart_week_1"></div>
                </div>
            </div>
            <!--排行榜-->
            <div class="layui-col-md4">
                <div class="grid-demo3" style="height: 485px;overflow-y: scroll;">
                    <div id="week-chart-content" class="layui-collapse" lay-accordion="">
                        <div class="layui-colla-item">
                            <h2 class="layui-colla-title">总浏览量排行榜</h2>
                            <div class="layui-colla-content layui-show">
                                <div class="top-chart-warpper">
                                    <div class="chart-title">浏览量前十:</div>
                                    <div id="week-all-top" class="chart-content"></div>
                                </div>
                                <div class="bottom-chart-warpper">
                                    <div class="chart-title">浏览量后十:</div>
                                    <div id="week-all-bottom" class="chart-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="month-content" class="layui-row layui-col-space10" style="padding: 10px; display: none">
                    <!--统计图-->
                    <div class="layui-col-md8">
                        <div class="grid-demo3" style="height: 485px">
                            <div style="width: 100%; height: 485px;" id="chart_month_1"></div>
                        </div>
                    </div>
                    <!--排行榜-->
                    <div class="layui-col-md4">
                        <div class="grid-demo3" style="height: 485px;overflow-y: scroll;">
                            <div id="month-chart-content" class="layui-collapse" lay-accordion="">
                                <div class="layui-colla-item">
                                    <h2 class="layui-colla-title">总浏览量排行榜</h2>
                                    <div class="layui-colla-content layui-show">
                                        <div class="top-chart-warpper">
                                            <div class="chart-title">浏览量前十:</div>
                                            <div id="month-all-top" class="chart-content"></div>
                                        </div>
                                        <div class="bottom-chart-warpper">
                                            <div class="chart-title">浏览量后十:</div>
                                            <div id="month-all-bottom" class="chart-content"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        <div id="year-content" class="layui-row layui-col-space10" style="padding: 10px; display: none">
            <div class="layui-col-md8">
                <div class="grid-demo3" style="height: 485px">
                    <div style="width: 100%; height: 485px;" id="chart_year_1"></div>
                </div>
            </div>
            <div class="layui-col-md4">
                <div class="grid-demo3" style="height: 485px;overflow-y: scroll;">
                    <div id="year-chart-content" class="layui-collapse" lay-accordion="">
                        <div class="layui-colla-item">
                            <h2 class="layui-colla-title">总浏览量排行榜</h2>
                            <div class="layui-colla-content layui-show">
                                <div class="top-chart-warpper">
                                    <div class="chart-title">浏览量前十:</div>
                                    <div id="year-all-top" class="chart-content"></div>
                                </div>
                                <div class="bottom-chart-warpper">
                                    <div class="chart-title">浏览量后十:</div>
                                    <div id="year-all-bottom" class="chart-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    var query = window.location.search.substring(1);
    query = decodeURI(query);
    query = query.split("=")[1];
    part = query;

    layui.use('element', function(){
        element = layui.element;
    });

    //这两个模块是否显示了
    var isMonth = false;
    var isYear = false;

    //模块对比雷达图
    var weekRadarOption = null;
    var monthRadarOption = null;
    var yearRadarOption = null;

    //总浏览量
    var weekOption = null;
    var monthOption = null;
    var yearOption = null;

    //分标签统计图
    var labelWeekOption = null;
    var labelMonthOption = null;
    var labelYearOption = null;

    //全部的标签
    var classifyList = null;
    //排行榜
    var weekTopChart = null;
    var weekBottomChart = null;
    var monthTopChart = null;
    var monthBottomChart = null;
    var yearTopChart = null;
    var yearBottomChart = null;

    //浏览次数 总次数+分标签次数
    var weekData = null;
    var monthData = null;
    var yearData = null;

    //雷达对比图数据
    var contrastWeekData = null;
    var contrastMonthData = null;
    var contrastYearData = null;

    var weekMax = 100;
    var monthMax = 100;
    var yearMax = 100;
    init();
    function init(){
        //获取全部分类
        $.ajax({
            type: "POST",
            url: serverIp + "classify/study", // 后端服务器上传地址
            data: {
                part: part
            },
            async: false, // 是否异步执行
            success: function (rs) {
                classifyList = rs.data;
            },
            error: function () {}
        });

        //获取周排行榜
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'week',
                type: 0
            },
            async: false, // 是否异步执行
            success: function (rs) {
                weekTopChart = rs.data;
            },
            error: function () {}
        });
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'week',
                type: 1
            },
            async: false, // 是否异步执行
            success: function (rs) {
                weekBottomChart = rs.data;
            },
            error: function () {}
        });
        //获取月排行榜
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'month',
                type: 0
            },
            async: false, // 是否异步执行
            success: function (rs) {
                monthTopChart = rs.data;
            },
            error: function () {}
        });
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'month',
                type: 1
            },
            async: false, // 是否异步执行
            success: function (rs) {
                monthBottomChart = rs.data;
            },
            error: function () {}
        });
        //获取年排行榜
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'year',
                type: 0
            },
            async: false, // 是否异步执行
            success: function (rs) {
                yearTopChart = rs.data;
            },
            error: function () {}
        });
        $.ajax({
            type: "POST",
            url: serverIp + "manage/chart", // 后端服务器上传地址
            data: {
                model:"study",
                part: part,
                time: 'year',
                type: 1
            },
            async: false, // 是否异步执行
            success: function (rs) {
                yearBottomChart = rs.data;
            },
            error: function () {}
        });

        initChart();

        //获取周浏览数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/count", // 后端服务器上传地址
            data: {
                part: part,
                time: 'week'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                weekData = rs.data;
            },
            error: function () {}
        });
        weekOption = {
            title: {text: '七天内总浏览量'},
            legend: {
                left: 150,
                data: ['浏览量']
            },
            grid:{
                top:100,
                height: 200
            },//统计图位置
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt){
                            var value = opt.series[0].data;
                            var time = opt.xAxis[0].data;
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td>日期</td><td>浏览量</td></tr>';
                            for(var i = 0; i < value.length; i++) {
                                table += '<tr><td>'+time[i]+'</td><td>'+value[i]+'</td></tr>';
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(weekRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){}
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(labelWeekOption);
                        }
                    },
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    boundaryGap: false,
                    data: getAllDateList(weekData["all"]),
                    axisTick:{
                        interval:0
                    },
                    axisLabel:{
                        show:true,
                        interval:0,
                        formatter:function (value) {
                            var date = new Date(value);
                            var texts = [(date.getMonth() + 1), date.getDate()];
                            return texts.join('-');
                        }
                    }
                }
            ],
            yAxis: [{type: 'value'}],
            series: [
                {
                    name: '浏览量',
                    type: 'line',
                    smooth: true,
                    itemStyle: {normal: {areaStyle: {type: 'default'}}},
                    data: getAllValueList(weekData["all"]),
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                }
            ]
        };
        var labelWeekData = getLabelData(weekData);
        var series = getLabelSeries();
        labelWeekOption = {
            title: {text: '七天内浏览量'},
            legend: {
                top:40,
                left:20,
                orient: 'vertical'
            },
            tooltip: {
                trigger: 'axis',
                showContent: true
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false,                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = opt.dataset[0].source;
                            var newData = data[0].map(function(col, i) {
                                return data.map(function(row) {
                                    return row[i];
                                })
                            });
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'

                            for(var i = 0; i < newData.length; i++) {
                                table += '<tr>';
                                for (var j = 0; j < newData[i].length; j++) {
                                    if(i === 0 && j === 0) {
                                        table += '<td></td>'
                                    } else {
                                        table += '<td>' + newData[i][j] + '</td>'
                                    }
                                }
                                table += '</tr>'
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(weekRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(weekOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){}
                    },
                    saveAsImage: {show: true},
                }
            },
            dataset: {
                source: labelWeekData
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                axisLabel:{
                    show:true,
                    interval:0,
                    formatter:function (value) {
                        var date = new Date(value);
                        return (date.getMonth() + 1) + "月" + date.getDate()  + "日";
                    }
                }
            },
            yAxis: {gridIndex: 0},
            grid: {top: '55%'},
            series: series
        };
        //获取月浏览数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/count", // 后端服务器上传地址
            data: {
                part: part,
                time: 'month'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                monthData = rs.data;
            },
            error: function () {}
        });
        monthOption = {
            title: {text: '本月总浏览量'},
            legend: {
                left: 130,
                data: ['浏览量']
            },
            grid:{
                top:100,
                height: 200
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false,                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt){
                            var value = opt.series[0].data;
                            var time = opt.xAxis[0].data;
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td>日期</td><td>浏览量</td></tr>';
                            for(var i = 0; i < value.length; i++) {
                                table += '<tr><td>'+time[i]+'</td><td>'+value[i]+'</td></tr>';
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(monthRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){}
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(labelMonthOption);
                        }
                    },
                    saveAsImage: {show: true},
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    boundaryGap: false,
                    data: getAllDateList(monthData["all"]),
                    axisTick:{
                        interval:0
                    },
                    axisLabel:{
                        show:true,
                        interval:0,
                        formatter:function (value) {
                            var date = new Date(value);
                            var texts = [(date.getMonth() + 1), date.getDate()];
                            return texts.join('-');
                        }
                    }
                }
            ],
            yAxis: [{type: 'value'}],
            series: [
                {
                    name: '浏览量',
                    type: 'line',
                    smooth: true,
                    itemStyle: {normal: {areaStyle: {type: 'default'}}},
                    data: getAllValueList(monthData["all"]),
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                }
            ]
        };
        var labelMonthData = getLabelData(monthData);
        labelMonthOption = {
            title: {text: '一月内浏览量'},
            legend: {
                top:40,
                left:20,
                orient: 'vertical'
            },
            tooltip: {
                trigger: 'axis',
                showContent: true
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false,                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = opt.dataset[0].source;
                            var newData = data[0].map(function(col, i) {
                                return data.map(function(row) {
                                    return row[i];
                                })
                            });
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'

                            for(var i = 0; i < newData.length; i++) {
                                table += '<tr>';
                                for (var j = 0; j < newData[i].length; j++) {
                                    if(i === 0 && j === 0) {
                                        table += '<td></td>'
                                    } else {
                                        table += '<td>' + newData[i][j] + '</td>'
                                    }
                                }
                                table += '</tr>'
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(monthRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(monthOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){}
                    },
                    saveAsImage: {show: true},
                }
            },
            dataset: {
                source: labelMonthData
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                axisLabel:{
                    show:true,
                    formatter:function (value) {
                        var date = new Date(value);
                        var texts = [(date.getMonth() + 1), date.getDate()];
                        return texts.join('-');
                    }
                }
            },
            yAxis: {gridIndex: 0},
            grid: {top: '55%'},
            series: series
        };
        //获取年浏览数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/count", // 后端服务器上传地址
            data: {
                part: part,
                time: 'year'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                yearData = rs.data;
            },
            error: function () {}
        });
        yearOption = {
            title: {text: '一年内总浏览量'},
            legend: {
                left: 130,
                data: ['浏览量']
            },
            grid:{
                top:100,
                height: 200
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false,                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt){
                            var value = opt.series[0].data;
                            var time = opt.xAxis[0].data;
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td>日期</td><td>浏览量</td></tr>';
                            for(var i = 0; i < value.length; i++) {
                                table += '<tr><td>'+time[i]+'</td><td>'+value[i]+'</td></tr>';
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(yearRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){}
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(labelYearOption);
                        }
                    },
                    saveAsImage: {show: true},
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    boundaryGap: false,
                    data: getAllDateList(yearData["all"]),
                    axisTick:{
                        interval:0
                    },
                    axisLabel:{
                        show:true,
                        interval:0,
                        formatter:function (value) {
                            var date = new Date(value);
                            var texts = [(date.getMonth() + 1), date.getDate()];
                            return texts.join('-');
                        }
                    }
                }
            ],
            yAxis: [{type: 'value'}],
            series: [
                {
                    name: '浏览量',
                    type: 'line',
                    smooth: true,
                    itemStyle: {normal: {areaStyle: {type: 'default'}}},
                    data: getAllValueList(yearData["all"]),
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                }
            ]
        };
        var labelYearData = getLabelData(yearData);
        labelYearOption = {
            title: {text: '一年内浏览量'},
            legend: {
                top:40,
                left:20,
                orient: 'vertical'
            },
            tooltip: {
                trigger: 'axis',
                showContent: true
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom:{
                        show: true,
                        zoomOnMouseWheel:true,                  //如何触发缩放。可选值为：true：表示不按任何功能键，鼠标滚轮能触发缩放。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标滚轮能触发缩放。'ctrl'：表示按住 ctrl 和鼠标滚轮能触发缩放。'alt'：表示按住 alt 和鼠标滚轮能触发缩放。
                        moveOnMouseMove:true,                   //如何触发数据窗口平移。true：表示不按任何功能键，鼠标移动能触发数据窗口平移。false：表示鼠标滚轮不能触发缩放。'shift'：表示按住 shift 和鼠标移动能触发数据窗口平移。'ctrl'：表示按住 ctrl 和鼠标移动能触发数据窗口平移。'alt'：表示按住 alt 和鼠标移动能触发数据窗口平移。
                        yAxisIndex:false,                        //设置 dataZoom-inside 组件控制的 y轴,可以用数组表示多个轴
                    },
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = JSON.stringify(opt);
                            data = JSON.parse(data).dataset[0].source;
                            var newData = data[0].map(function(col, i) {
                                return data.map(function(row) {
                                    return row[i];
                                })
                            });
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'

                            for(var i = 0; i < newData.length; i++) {
                                table += '<tr>';
                                for (var j = 0; j < newData[i].length; j++) {
                                    if(i === 0 && j === 0) {
                                        table += '<td></td>'
                                    } else {
                                        table += '<td>' + newData[i][j] + '</td>'
                                    }
                                }
                                table += '</tr>'
                            }
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(yearRadarOption);
                        }
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(yearOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){}
                    },
                    saveAsImage: {show: true},
                }
            },
            dataset: {
                source: labelYearData
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                axisLabel:{
                    show:true,
                    formatter:function (value) {
                        var date = new Date(value);
                        var texts = [(date.getMonth() + 1), date.getDate()];
                        return texts.join('-');
                    }
                }
            },
            yAxis: {gridIndex: 0},
            grid: {top: '55%'},
            series: series
        };

        //获取雷达图 本周对比数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/contrast", // 后端服务器上传地址
            data: {
                part: part,
                time: 'week'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                contrastWeekData = rs.data;
            },
            error: function () {}
        });
        var weekRadarData = getContrastData("周", contrastWeekData);
        var weekRadarIndicator = getRadarIndicator(weekMax);
        weekRadarOption = {
            title: {text: '模块对比'},
            tooltip: {trigger: 'axis'},
            legend: {
                top:40,
                left: 'center',
                data: ['上周浏览量', '本周浏览量']
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = opt.series[0].data;
                            var pre = data[0];
                            var now = data[1];
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td></td>';
                            for(var i = 0; i < classifyList.length; i++) {
                                table += '<td>' + classifyList[i].msg + '</td>';
                            }
                            table += '</tr><tr><td>' + pre.name + '</td>';
                            for(var i = 0; i < pre.value.length; i++) {
                                table += '<td>' + pre.value[i] + '</td>'
                            }
                            table += '</tr><tr><td>' + now.name + '</td>';
                            for(var i = 0; i < now.value.length; i++) {
                                table += '<td>' + now.value[i] + '</td>'
                            }
                            table += '</tr>';
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){}
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(weekOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            weekChart.clear();
                            weekChart.setOption(labelWeekOption);
                        }
                    },
                    saveAsImage: {show: true},
                }
            },
            calculable: true,
            polar: [{
                indicator: weekRadarIndicator,
                center: ['50%', '50%'],
                radius: 130
            }],
            series: [
                {
                    name: '数据对比',
                    type: 'radar',
                    tooltip: {
                        trigger: 'item'
                    },
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: weekRadarData
                }
            ]
        };
        //本月对比数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/contrast", // 后端服务器上传地址
            data: {
                part: part,
                time: 'month'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                contrastMonthData = rs.data;
            },
            error: function () {}
        });
        var monthRadarData = getContrastData("月", contrastMonthData);
        var monthRadarIndicator = getRadarIndicator(monthMax);
        monthRadarOption = {
            title: {text: '模块对比'},
            tooltip: {trigger: 'axis'},
            legend: {
                top:40,
                left: 'center',
                data: ['上月浏览量', '本月浏览量']
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = opt.series[0].data;
                            var pre = data[0];
                            var now = data[1];
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td></td>';
                            for(var i = 0; i < classifyList.length; i++) {
                                table += '<td>' + classifyList[i].msg + '</td>';
                            }
                            table += '</tr><tr><td>' + pre.name + '</td>';
                            for(var i = 0; i < pre.value.length; i++) {
                                table += '<td>' + pre.value[i] + '</td>'
                            }
                            table += '</tr><tr><td>' + now.name + '</td>';
                            for(var i = 0; i < now.value.length; i++) {
                                table += '<td>' + now.value[i] + '</td>'
                            }
                            table += '</tr>';
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){}
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(monthOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            monthChart.clear();
                            monthChart.setOption(labelMonthOption);
                        }
                    },
                    saveAsImage: {show: true},
                }
            },
            calculable: true,
            polar: [
                {
                    indicator: monthRadarIndicator,
                    center: ['50%', '50%'],
                    radius: 130
                }
            ],
            series: [
                {
                    name: '数据对比',
                    type: 'radar',
                    tooltip: {
                        trigger: 'item'
                    },
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: monthRadarData
                }
            ]
        };
        //本年对比数据
        $.ajax({
            type: "POST",
            url: serverIp + "manage/contrast", // 后端服务器上传地址
            data: {
                part: part,
                time: 'year'
            },
            async: false, // 是否异步执行
            success: function (rs) {
                contrastYearData = rs.data;
            },
            error: function () {}
        });
        var yearRadarData = getContrastData("年", contrastYearData);
        var yearRadarIndicator = getRadarIndicator(yearMax);
        yearRadarOption   = {
            title: {text: '模块对比'},
            tooltip: {trigger: 'axis'},
            legend: {
                top:40,
                left: 'center',
                data: ['上周浏览量', '本周浏览量']
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {
                        show: true,
                        readOnly: true,
                        optionToContent: function(opt) {
                            var data = opt.series[0].data;
                            var pre = data[0];
                            var now = data[1];
                            var table = '<table class="layui-table" style="width:100%;text-align:center"><tbody>'
                            table += '<tr><td></td>';
                            for(var i = 0; i < classifyList.length; i++) {
                                table += '<td>' + classifyList[i].msg + '</td>';
                            }
                            table += '</tr><tr><td>' + pre.name + '</td>';
                            for(var i = 0; i < pre.value.length; i++) {
                                table += '<td>' + pre.value[i] + '</td>'
                            }
                            table += '</tr><tr><td>' + now.name + '</td>';
                            for(var i = 0; i < now.value.length; i++) {
                                table += '<td>' + now.value[i] + '</td>'
                            }
                            table += '</tr>';
                            table += '</tbody></table>';
                            return table;
                        }
                    },
                    magicType: {show: true, type: ['line', 'bar']},//
                    myTool1:{
                        show: true,
                        title: '模块增长对比',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/contrast.svg',
                        onclick: function (){}
                    },
                    myTool2:{
                        show: true,
                        title: '总浏览量',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/allCount.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(yearOption);
                        }
                    },
                    myTool0:{
                        show: true,
                        title: '还原',
                        icon: 'image://http://192.168.0.103:8000/resource/images/public/refresh.svg',
                        onclick: function (){
                            yearChart.clear();
                            yearChart.setOption(labelYearOption);
                        }
                    },
                    saveAsImage: {show: true},
                }
            },
            calculable: true,
            polar: [
                {
                    indicator: yearRadarIndicator,
                    center: ['50%', '50%'],
                    radius: 130
                }
            ],
            series: [
                {
                    name: '数据对比',
                    type: 'radar',
                    tooltip: {
                        trigger: 'item'
                    },
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: yearRadarData
                }
            ]
        };

        // 第一个图标
        weekChart = echarts.init(document.getElementById('chart_week_1'));
        weekChart.on('updateAxisPointer', function (event) {
            var xAxisInfo = event.axesInfo[0];
            if (xAxisInfo) {
                var dimension = xAxisInfo.value + 1;
                weekChart.setOption({
                    series: {
                        id: 'pie',
                        label: {
                            formatter: '{b}: {@[' + dimension + ']} ({d}%)'
                        },
                        encode: {
                            value: dimension,
                            tooltip: dimension
                        }
                    }
                });
            }
        });
        weekChart.setOption(labelWeekOption);
    }

    //初始化排行榜
    function initChart() {
        for(var i = 0; i < classifyList.length; i++) {
            var msg = classifyList[i].msg;
            addLabel('week', msg, weekTopChart[msg], weekBottomChart[msg]);
            addLabel('month', msg, monthTopChart[msg], monthBottomChart[msg]);
            addLabel('year', msg, yearTopChart[msg], yearBottomChart[msg]);
        }
        addLabelChart('week', 'all', 'top', weekTopChart["all"]);
        addLabelChart('week', 'all', 'bottom', weekBottomChart["all"]);
        addLabelChart('month', 'all', 'top', monthTopChart["all"]);
        addLabelChart('month', 'all', 'bottom', monthBottomChart["all"]);
        addLabelChart('year', 'all', 'top', yearTopChart["all"]);
        addLabelChart('year', 'all', 'bottom', yearBottomChart["all"]);
    }

    //添加排行榜标签
    function addLabel(part, value, topList, bottomList) {
        $("#" + part + "-chart-content").append(
            '<div class="layui-colla-item">\n' +
            '<h2 class="layui-colla-title">' + value + '浏览量排行榜</h2>\n' +
            '<div class="layui-colla-content">\n' +
            '<div class="top-chart-warpper">\n' +
            '<div class="chart-title">浏览量前十:</div>\n' +
            '<div id="' + part + '-' + value + '-top" class="chart-content">\n' +
            '</div>\n' +
            '</div>\n' +
            '<div class="bottom-chart-warpper">\n' +
            '<div class="chart-title">浏览量后十:</div>\n' +
            '<div id="' + part + '-' + value + '-bottom" class="chart-content">\n' +
            '</div>\n' +
            '</div>\n' +
            '</div>\n' +
            '</div>');
        addLabelChart(part, value, 'top', topList);
        addLabelChart(part, value, 'bottom', bottomList);
    }

    //添加每个人label的排行榜内容
    function addLabelChart(time, value, part, list) {
        $("#" + time + "-" + value + "-" + part).html("");
        for(var i = 0; i < list.length; i++) {
            $("#" + time + "-" + value + "-" + part).append('<div class="chart-label-txt">' + (i + 1) + '.' + list[i] + '</div>')
        }
    }

    function showWeek() {
        $("#week-content").show();
        $("#month-content").hide();
        $("#year-content").hide();
    }

    function showMonth() {
        $("#week-content").hide();
        $("#month-content").show();
        $("#year-content").hide();
        if(!isMonth){
            isMonth = true;
            monthChart = echarts.init(document.getElementById('chart_month_1'));
            monthChart.on('updateAxisPointer', function (event) {
                var xAxisInfo = event.axesInfo[0];
                if (xAxisInfo) {
                    var dimension = xAxisInfo.value + 1;
                    monthChart.setOption({
                        series: {
                            id: 'pie',
                            label: {
                                formatter: '{b}: {@[' + dimension + ']} ({d}%)'
                            },
                            encode: {
                                value: dimension,
                                tooltip: dimension
                            }
                        }
                    });
                }
            });
            monthChart.setOption(labelMonthOption);
        }
    }

    function showYear() {
        $("#week-content").hide();
        $("#month-content").hide();
        $("#year-content").show();
        if(!isYear){
            isYear = true;
            yearChart = echarts.init(document.getElementById('chart_year_1'));
            yearChart.on('updateAxisPointer', function (event) {
                var xAxisInfo = event.axesInfo[0];
                if (xAxisInfo) {
                    var dimension = xAxisInfo.value + 1;
                    yearChart.setOption({
                        series: {
                            id: 'pie',
                            label: {
                                formatter: '{b}: {@[' + dimension + ']} ({d}%)'
                            },
                            encode: {
                                value: dimension,
                                tooltip: dimension
                            }
                        }
                    });
                }
            });
            yearChart.setOption(labelYearOption);
        }
    }

    //获取labelOption所需数据
    function getLabelData(dataList) {
        var rs = [];
        rs.push(getLabelDateList(dataList["all"]));
        for(var i = 0; i < classifyList.length; i++) {
            var english = classifyList[i].english;
            var msg = classifyList[i].msg;
            rs.push(getLabelValueList(msg, dataList[english]));
        }
        return rs;
    }

    //获取数据中的全部日期 并加标签
    function getLabelDateList(data) {
        var dateList = getAllDateList(data);
        dateList.unshift('time');
        return dateList;
    }

    //获取数据中的全部数据 并加标签
    function getLabelValueList(label, data) {
        var valueList = getAllValueList(data);
        valueList.unshift(label);
        return valueList;
    }

    //获取data中的全部时间
    function getAllDateList(data) {
        var dateList = [];
        for(var i = 0; i < data.length; i++) {
            dateList.push(data[i].time);
        }
        return dateList;
    }

    //获取data中的全部数据
    function getAllValueList(data) {
        var valueList = [];
        for(var i = 0; i < data.length; i++) {
            valueList.push(data[i].count);
        }
        return valueList;
    }

    function getAllCountObj(name, value) {
        var obj = {};
        obj.name = name;
        obj.value = value;
        return obj;
    }

    //获取模块对比雷达图中所需的数据
    function getContrastData(str, data) {
        var rs = [];
        var pre = data[0];//上一次数据
        var now = data[1];//本次数据
        var preData = [];
        var nowData = [];
        for(var i = 0; i < classifyList.length; i++) {
            var index = classifyList[i].msg;
            preData.push(pre[index]);
            nowData.push(now[index]);
        }
        var max1 = Math.max.apply(null, preData);
        var max2 = Math.max.apply(null, nowData);
        var max = max1 > max2 ? max1 : max2;
        if(str == '周'){
            weekMax = max;
        } else if (str == '月'){
            monthMax = max;
        } else {
            yearMax = max;
        }
        var preObj = getAllCountObj('上' + str + '浏览量', preData);
        rs.push(preObj);
        var nowObj = getAllCountObj('本' + str + '浏览量', nowData);
        rs.push(nowObj);
        return rs;
    }

    //生成labeloption中的series 不分时间
    function getLabelSeries() {
        var rs = [];
        var obj = {
            type: 'pie',
            id: 'pie',
            radius: '25%',
            center: ['50%', '25%'],
            label: {
                formatter: '{b}: {@2000} ({d}%)'
            },
            encode: {
                itemName: 'time',
                value: '2000',
                tooltip: '2000'
            }
        };
        for(var i = 0; i < classifyList.length; i++) {
            rs.push({type: 'line', smooth: true, seriesLayoutBy: 'row'});
        }
        rs.push(obj);
        return rs;
    }

    //生成雷达图中的polar.indicator 显示有几个标签 每个的最大值是多少
    function getRadarIndicator(max) {
        var rsList = [];
        for(var i = 0; i < classifyList.length; i++) {
            var obj = {};
            obj.text = classifyList[i].msg;
            obj.max = max;
            rsList.push(obj);
        }
        return rsList;
    }

</script>
</html>
